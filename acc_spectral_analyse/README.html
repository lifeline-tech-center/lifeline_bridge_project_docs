<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav ul li a { background-image: none; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>加速度频谱分析模块（acc_spectral_analyse） | 生命线平台技术文档</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="加速度频谱分析模块（acc_spectral_analyse）" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="城市生命线安全工程监测平台桥梁专项数据分析与预警模型" /> <meta property="og:description" content="城市生命线安全工程监测平台桥梁专项数据分析与预警模型" /> <meta property="og:site_name" content="生命线平台技术文档" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="加速度频谱分析模块（acc_spectral_analyse）" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"城市生命线安全工程监测平台桥梁专项数据分析与预警模型","headline":"加速度频谱分析模块（acc_spectral_analyse）","url":"/acc_spectral_analyse/README.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> 生命线平台技术文档 </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">🏗️ 生命线平台-桥梁专项模型开发文档</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search 生命线平台技术文档" aria-label="Search 生命线平台技术文档" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/lifeline_tech_center/lifeline_bridge_project_docs" class="site-button" > 项目主页 </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><span>加速度频谱分析模块（acc_spectral_analyse）</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="️-加速度频谱分析模块"> <a href="#️-加速度频谱分析模块" class="anchor-heading" aria-labelledby="️-加速度频谱分析模块"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ⚡️ 加速度频谱分析模块  </h1> <blockquote> <div class="table-wrapper"><table> <tbody> <tr> <td>城市生命线安全工程 </td> <td> 加速度频谱分析 </td> <td> 加速度滤波分析 </td> <td>多设备频谱分析</td> <td> 多时段对比与可视化</td> </tr> </tbody> </table></div> </blockquote><hr /> <h2 id="项目背景"> <a href="#项目背景" class="anchor-heading" aria-labelledby="项目背景"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 📚 项目背景 </h2> <p>在桥梁、地铁区间、建筑物顶层等结构健康监测场景中，<strong>竖向加速度</strong> 是反映振动特征与载荷效应的首要指标。通过频域分析可以直观识别主振峰、谐振区及异常能量带，为模态频率预警、疲劳评估和运营限速提供数据支撑。</p> <p>本模块以 <strong>快速傅里叶变换 (FFT)</strong> 为核心，可对<strong>单通道或多通道</strong>加速度数据进行频谱分析，并提供 <strong>Butterworth 带通滤波</strong>、<strong>多时段频谱对比</strong> 等功能，便于监测人员快速定位结构动力特征变化。</p><hr /> <h2 id="模块简介"> <a href="#模块简介" class="anchor-heading" aria-labelledby="模块简介"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 📌 模块简介 </h2> <p>本模块为<strong>城市生命线安全工程监测平台桥梁专项-加速度数据分析</strong>的核心模块，包含<strong>单通道频谱分析、多时段频谱分析、多设备频谱分析和滤波分析</strong>四个关键功能。模块基于快速傅里叶变换（FFT）及 Butterworth 滤波器设计，支持对结构监测中的原始加速度数据进行自动化频谱提取和多时段振动特征对比，为结构模态识别、损伤定位和预警评估提供支撑。</p> <div class="table-wrapper"><table> <thead> <tr> <th>项目</th> <th>内容</th> </tr> </thead> <tbody> <tr> <td><strong>模块名称</strong></td> <td><code class="language-plaintext highlighter-rouge">acc_spectral_analyse</code></td> </tr> <tr> <td><strong>核心函数</strong></td> <td><code class="language-plaintext highlighter-rouge">load_data</code>, <code class="language-plaintext highlighter-rouge">apply_bandpass_filter</code>, <code class="language-plaintext highlighter-rouge">plot_fft_comparison</code>, <code class="language-plaintext highlighter-rouge">compare_two_files</code></td> </tr> <tr> <td><strong>作者</strong></td> <td>肖图刚</td> </tr> <tr> <td><strong>开发时间</strong></td> <td>2025‑06‑10</td> </tr> <tr> <td><strong>最后修改</strong></td> <td>2025‑06‑16（新增滤波功能与多时段对比功能，版本号升级至 v0.2.0）</td> </tr> </tbody> </table></div><hr /> <h2 id="功能描述"> <a href="#功能描述" class="anchor-heading" aria-labelledby="功能描述"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 🌟 功能描述 </h2> <p>✅ <strong>单/多通道 FFT</strong>：输出单边归一化幅值谱 ✅ <strong>可选带通滤波</strong>：Butterworth 0.16 – 10 Hz（默认，可配置） ✅ <strong>多时段频谱对比</strong>：一键对比同设备不同时段能量分布差异 ✅ <strong>高分辨率可视化</strong>：时域‑频域双图，中文/英文双字体 ✅ <strong>功率谱导出</strong>：FFT 结果可保存 CSV 便于二次分析 ✅ <strong>模块化接口</strong>：易于集成至桥梁监控、城市生命线平台及后续开发</p><hr /> <h2 id="输入数据说明"> <a href="#输入数据说明" class="anchor-heading" aria-labelledby="输入数据说明"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 📂 输入数据说明 </h2> <ul> <li><strong>文件格式</strong>：空格或制表符分隔纯文本 <code class="language-plaintext highlighter-rouge">.txt</code> / <code class="language-plaintext highlighter-rouge">.dat</code></li> <li><strong>列结构</strong>：<code class="language-plaintext highlighter-rouge">time | ch1 | ch2 | … | chN</code>（至少两列）</li> <li><strong>采样频率 <code class="language-plaintext highlighter-rouge">FS</code></strong>：示例 50 Hz，可在脚本中自定义</li> <li><strong>采样点数</strong>：默认截取 3000 点做示例，实际分析时可根据计算时间动态调整</li> </ul><hr /> <h2 id="️运行环境与依赖"> <a href="#️运行环境与依赖" class="anchor-heading" aria-labelledby="️运行环境与依赖"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ⚙️ 运行环境与依赖 </h2> <ul> <li><strong>Python</strong> ≥ 3.9.16</li> <li><strong>依赖库</strong> <ul> <li>numpy ≥ 2.2.4</li> <li>pandas ≥ 2.2.3</li> <li>matplotlib ≥ 3.10.3</li> <li>scipy ≥ 1.15.2</li> </ul> </li> </ul> <blockquote> <p>📝 <strong>使用建议</strong></p> <ul> <li>低频研究可适当下调 <code class="language-plaintext highlighter-rouge">LOWCUT</code>；若关注高阶模态，可上调 <code class="language-plaintext highlighter-rouge">HIGHCUT</code>。</li> <li>多通道绘图时，避免一次性选过多通道导致图像过密，可分批绘制。</li> </ul> </blockquote><hr /> <h2 id="️快速使用说明"> <a href="#️快速使用说明" class="anchor-heading" aria-labelledby="️快速使用说明"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 🛠️ 快速使用说明 </h2> <p>📁 安装依赖</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</code></pre></div></div> <p>📁 安装模块</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install</span> <span class="nt">-e</span> <span class="nb">.</span>
</code></pre></div></div> <p>✅ 安装成功后，可直接运行示例：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python example.py                <span class="c"># 多通道 FFT 绘图</span>
python example_filter.py         <span class="c"># 单文件 滤波 + FFT 对比</span>
python example_multi_time.py  <span class="c"># 两时段单通道频谱对比</span>
</code></pre></div></div> <p>核心调用范式：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### example.py  
</span><span class="s">"""示例脚本：读取数据 → 滤波 → FFT → 绘图"""</span>
<span class="kn">from</span> <span class="nn">acc_spectral_analyse</span> <span class="kn">import</span> <span class="n">load_data</span><span class="p">,</span> <span class="n">apply_bandpass_filter</span><span class="p">,</span> <span class="n">plot_fft_comparison</span>
<span class="c1"># ============================================
# 参数设置
# ============================================
</span><span class="n">FILEPATH</span> <span class="o">=</span> <span class="s">"datasets/2023-03-13_02_00_2min.txt"</span>  
<span class="c1"># 加速度数据文件路径。文件应为以空格或制表符分隔的纯文本文件，
# 第一列为时间戳，其余为多个加速度通道。
</span>
<span class="n">SAMPLE_POINTS</span> <span class="o">=</span> <span class="mi">3000</span>  
<span class="c1"># 指定从文件中读取的采样点数。默认截取前3000点用于分析，
# 主要用于控制处理数据的长度，避免全文件计算耗时过长。
</span>
<span class="n">FS</span> <span class="o">=</span> <span class="mi">50</span>  
<span class="c1"># 数据采样频率（Hz）。表示每秒采样50次，是进行频谱分析和滤波设计的基础参数。
</span>
<span class="n">LOWCUT</span><span class="p">,</span> <span class="n">HIGHCUT</span> <span class="o">=</span> <span class="mf">0.16</span><span class="p">,</span> <span class="mi">10</span>  
<span class="c1"># 带通滤波器的下限频率和上限频率（Hz）。
# 仅保留 0.16~10 Hz 范围内的信号成分，滤除其他频段的噪声或无关频率成分。
</span>
<span class="n">CHANNELS</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>  <span class="c1"># 多通道分析
# CHANNELS = [12]  # 单通道分析
# 选择分析和绘图的通道编号（从 0 开始）。
# 可为单个通道（如 [12]）或多个通道组合（如 [0, 3, 12]）。
# 实际对应原始数据文件的第 2、第 5、第 13 列加速度信号。
</span>
<span class="c1"># ============================================
# 数据处理与可视化流程
# ============================================
</span>
<span class="c1"># 读取原始加速度数据（时间戳 + 多通道信号）
</span><span class="n">t</span><span class="p">,</span> <span class="n">x_raw</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="n">FILEPATH</span><span class="p">,</span> <span class="n">SAMPLE_POINTS</span><span class="p">)</span>

<span class="c1"># 对多通道加速度数据应用 Butterworth 带通滤波器
</span><span class="n">x_filt</span> <span class="o">=</span> <span class="n">apply_bandpass_filter</span><span class="p">(</span><span class="n">x_raw</span><span class="p">,</span> <span class="n">FS</span><span class="p">,</span> <span class="n">LOWCUT</span><span class="p">,</span> <span class="n">HIGHCUT</span><span class="p">)</span>

<span class="c1"># 绘制选定通道的时域波形与单边幅值频谱对比图
</span><span class="n">plot_fft_comparison</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x_raw</span><span class="p">,</span> <span class="n">x_filt</span><span class="p">,</span> <span class="n">FS</span><span class="p">,</span> <span class="n">CHANNELS</span><span class="p">)</span>
</code></pre></div></div><hr /> <h2 id="主要流程"> <a href="#主要流程" class="anchor-heading" aria-labelledby="主要流程"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 🔢 主要流程 </h2> <ol> <li><strong>读取数据</strong> <code class="language-plaintext highlighter-rouge">load_data</code>（时间 + 多通道加速度）</li> <li><strong>可选带通滤波</strong> <code class="language-plaintext highlighter-rouge">apply_bandpass_filter</code></li> <li><strong>FFT 变换</strong> 内部 <code class="language-plaintext highlighter-rouge">_compute_fft</code> 生成单边幅值谱</li> <li><strong>结果可视化</strong> <code class="language-plaintext highlighter-rouge">plot_fft_comparison</code> 时域‑频域双图</li> <li><strong>多时段对比</strong> <code class="language-plaintext highlighter-rouge">compare_two_files</code> 一键绘制两曲线差异</li> </ol><hr /> <h2 id="输出结果说明"> <a href="#输出结果说明" class="anchor-heading" aria-labelledby="输出结果说明"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 💾 输出结果说明 </h2> <div class="table-wrapper"><table> <thead> <tr> <th>类型</th> <th>说明</th> <th>示例文件</th> </tr> </thead> <tbody> <tr> <td>频谱图 PNG</td> <td>单/多通道单文件 FFT 对比</td> <td><code class="language-plaintext highlighter-rouge">figures/ch1_fft_2023‑03‑13.png</code></td> </tr> <tr> <td>多时段频谱对比 PNG</td> <td>同设备两时段单通道幅值谱对比</td> <td><code class="language-plaintext highlighter-rouge">figures/compare_03‑13_vs_04‑24.png</code></td> </tr> <tr> <td>频谱 CSV（可选）</td> <td>每通道功率谱，列名 <code class="language-plaintext highlighter-rouge">freq_Hz，ch_1，ch_2…</code></td> <td><code class="language-plaintext highlighter-rouge">output/fft_power_03‑13.csv</code></td> </tr> </tbody> </table></div> <p><img src="/acc_spectral_analyse/figures/Figure_1.png" alt="通道1频谱图+滤波分析" /></p> <p><img src="/acc_spectral_analyse/figures/Figure_2.png" alt="通道4频谱图+滤波分析" /></p> <p><img src="/acc_spectral_analyse/figures/Figure_3.png" alt="通道13频谱图+滤波分析" /></p> <p><img src="/acc_spectral_analyse/figures/Figure_multi_time.png" alt="多时段频谱分析" /></p> <blockquote> <p>运行示例脚本时，程序会自动在终端打印文件保存路径。</p> </blockquote> <p>🔎 <strong>说明</strong></p> <ul> <li>当前模块以 <strong>离线监测数据</strong> 演示；后续可对接城市生命线平台的 <strong>实时加速度流</strong>，用于在线频谱监控、阈值报警与趋势对比。</li> </ul><hr /> <h2 id="后续优化建议"> <a href="#后续优化建议" class="anchor-heading" aria-labelledby="后续优化建议"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 🔁 后续优化建议 </h2> <ol> <li>支持批量文件循环分析、自动生成日报/周报</li> <li>引入 Welch、PSD 等功率谱密度估计方法</li> <li>支持输出 SVG 和矢量 PDF 以适配报告排版</li> <li> <p>可拓展为 Dash / Streamlit 前端，实现交互式频谱浏览</p> <p><a href="/">返回首页</a></p> </li> </ol> </main> <hr> <footer> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
